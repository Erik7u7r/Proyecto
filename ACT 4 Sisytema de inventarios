<?php
// ==========================================
// Clase abstracta Producto
// Define los atributos y mÃ©todos comunes
// ==========================================
abstract class Producto {
    protected $nombre;
    protected $precio;
    protected $stock;

    public function __construct($nombre, $precio, $stock) {
        $this->nombre = $nombre;
        $this->precio = $precio;
        $this->stock = $stock;
    }

    // MÃ©todo abstracto: cada subclase debe implementarlo
    abstract public function mostrarInfo();
    abstract public function calcularIVA();
}

// ==========================================
// Interfaz IDescuento
// Define un comportamiento adicional
// ==========================================
interface IDescuento {
    public function aplicarDescuento($porcentaje);
}

// ==========================================
// Subclase ElectrÃ³nico
// ==========================================
class Electronico extends Producto implements IDescuento {
    private $garantia; // en meses

    public function __construct($nombre, $precio, $stock, $garantia) {
        parent::__construct($nombre, $precio, $stock);
        $this->garantia = $garantia;
    }

    public function mostrarInfo() {
        echo "ðŸ“± ElectrÃ³nico: {$this->nombre} | Precio: {$this->precio} | Stock: {$this->stock} | GarantÃ­a: {$this->garantia} meses<br>";
    }

    public function calcularIVA() {
        return $this->precio * 0.16; // IVA del 16%
    }

    public function aplicarDescuento($porcentaje) {
        $this->precio -= $this->precio * ($porcentaje / 100);
    }
}

// ==========================================
// Subclase Alimento
// ==========================================
class Alimento extends Producto {
    private $caducidad;

    public function __construct($nombre, $precio, $stock, $caducidad) {
        parent::__construct($nombre, $precio, $stock);
        $this->caducidad = $caducidad;
    }

    public function mostrarInfo() {
        echo "ðŸŽ Alimento: {$this->nombre} | Precio: {$this->precio} | Stock: {$this->stock} | Caduca: {$this->caducidad}<br>";
    }

    public function calcularIVA() {
        return $this->precio * 0.08; // IVA reducido
    }
}

// ==========================================
// Subclase Ropa
// ==========================================
class Ropa extends Producto implements IDescuento {
    private $talla;

    public function __construct($nombre, $precio, $stock, $talla) {
        parent::__construct($nombre, $precio, $stock);
        $this->talla = $talla;
    }

    public function mostrarInfo() {
        echo "ðŸ‘• Ropa: {$this->nombre} | Precio: {$this->precio} | Stock: {$this->stock} | Talla: {$this->talla}<br>";
    }

    public function calcularIVA() {
        return $this->precio * 0.10; // IVA medio
    }

    public function aplicarDescuento($porcentaje) {
        $this->precio -= $this->precio * ($porcentaje / 100);
    }
}

// ==========================================
// Programa principal
// DemostraciÃ³n del Polimorfismo
// ==========================================

$productos = [
    new Electronico("Laptop HP", 15000, 5, 24),
    new Alimento("Manzana", 10, 100, "2025-12-01"),
    new Ropa("Camiseta", 250, 20, "M")
];

echo "<h2>ðŸ§¾ Inventario de Productos</h2>";

foreach ($productos as $producto) {
    $producto->mostrarInfo();
    echo "IVA: " . $producto->calcularIVA() . "<br><br>";
}

// Aplicar descuento solo a los que implementan la interfaz
echo "<h2>ðŸ’¸ Aplicando descuentos</h2>";
foreach ($productos as $producto) {
    if ($producto instanceof IDescuento) {
        $producto->aplicarDescuento(10);
    }
    $producto->mostrarInfo();
}
?>
